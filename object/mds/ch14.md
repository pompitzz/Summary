# Chapter 14. 일관성 있는 협력
- 일관성 있는 협력 패턴을 적용하면 코드가 이해하기 쉽고 직관적이며 유연해진다.

## 일관성 없는 코드
- 일관성 없는 코드는 같은 구현체들이 유사한 문제를 해결하고 있음에도 불구하고, 설계에 일관성이 없어 계속 새로운 구현이 추가된다.
- 새로운 구현이 많아질 수록 이해해야하는 구현들이 많아지며, 구현 하나를 이해한다고 다른 구현을 더 쉽게 이해할 수 있는 것도 아니다.

> 유사한 기능을 서로 다른 방식으로 구현하는건 시스템을 더 복잡하게 만든다.

## 일관성 있는 코드
- 일관성 있는 코드를 작성하기 위해선 **변하는 개념과 변하지 않는 개념을 분리하고 변하는 개념을 캡슐화하여야 한다.**
- 캡슐화는 변하는 어떤 것이든 감추는 것으로 가장 대표적인 예가 퍼블릭 인터페이스와 구현을 분리하는 것이다.

### 다양한 캡슐화
- 데이터 캡슐화
- 메서드 캡슐화
- 객체 캡슐화(합성)
- 서브타입 캡슐화(다형성)

## 일관성 있는 기본 정책 구현
- 변하지 않는것과 변하는 것을 분리하고 변하는 것을 캡슐화하면 **오로지 변하지 않는 것과 추상화에 대한 의존성 만으로도 전체적인 협력을 구현할 수 있다.**
    - 각 객체들을 변하지 않는 인터페이스에 의존하도록 하고, 변할 수 있는 구현체들은 런타임에 실제로 사용이 될 수 있도록 한다.
- 변하지 않는 것들로만 전체적인 협력을 구현하였기 때문에 **일관성 있는 기본 정책을 구현할 수 있다.**
    - 새로운 기능을 추가할 때 이미 전체적인 협력 흐름은 구현되어 있으므로 인터페이스들의 구현체만 추가하면 될 것이다.

`시스템이 일관성 있게 구현되어 있으면 시스템을 이해하고 수정하고 확장하는데 필요한 노력과 시간을 아낄 수 있다.`

> 처음에 일관성 있게 구조를 짜더라도 요구사항이 늘어날 수록 구조는 변경될 것이다. 협력은 고정된 것이 아니다. 협력은 요구사항의 변경에 따라 지속적으로 개선되어야 한다.

### 협력 패턴 찾기
- 협력은 계속해서 변경되므로 변경에 탄력적으로 대응할 수 있는 다양한 협력 패턴을 익히는 것이 중요하다.
- 협력을 일관성 있게 만드는 과정은 유사한 기능을 구현하기 위해 반복적으로 적용할 수 있는 협력의 구조를 찾아가는 것이다.
- 따라서 협력을 일관성 있게 만든다는 것은 유사한 변경을 수용할 수 있는 협력 패턴을 발견하는 것과 동일하다. 
